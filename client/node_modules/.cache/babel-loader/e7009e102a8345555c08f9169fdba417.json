{"ast":null,"code":"import axios from 'axios';\nexport const types = {\n  LOGIN: 'AUTH/LOGIN',\n  LOGOUT: 'AUTH/LOGOUT'\n};\nconst initialState = {\n  userId: null,\n  username: null,\n  user_function: 9\n};\nexport const actions = {\n  login: obj => {\n    let resuser_function, resusername;\n    axios.post('http://127.0.0.1/api/login', {\n      username: obj.username,\n      password: obj.password\n    }).then(function (res) {\n      resusername = res.data[0]['user_name'];\n      resuser_function = res.data[0]['user_function'];\n      console.log(resusername, resuser_function);\n      return {\n        type: types.LOGIN,\n        username: resusername,\n        user_function: resuser_function\n      };\n    }).catch(function (err) {\n      console.log(err);\n    });\n  },\n  logout: () => {\n    axios.get('http://127.0.0.1/api/logout').then(function (response) {\n      console.log(response);\n    }).catch(function (error) {\n      console.log(error);\n    });\n    return {\n      type: types.LOGOUT\n    };\n  }\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case types.LOGIN:\n      return { ...state,\n        username: action.username,\n        user_function: action['user_function']\n      };\n\n    case types.LOGOUT:\n      return { ...state,\n        username: null,\n        userId: null,\n        user_function: 9\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\nexport const getUsername = state => {\n  switch (state.username) {\n    case 'daidai':\n      return '呆呆';\n\n    case 'guaiguai':\n      return '乖乖';\n\n    default:\n      return state.username;\n  }\n};","map":{"version":3,"sources":["C:/Users/何亚星/Desktop/myWeb/client/src/redux/auth.js"],"names":["axios","types","LOGIN","LOGOUT","initialState","userId","username","user_function","actions","login","obj","resuser_function","resusername","post","password","then","res","data","console","log","type","catch","err","logout","get","response","error","reducer","state","action","getUsername"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,MAAMC,KAAK,GAAG;AACnBC,EAAAA,KAAK,EAAE,YADY;AAEnBC,EAAAA,MAAM,EAAE;AAFW,CAAd;AAKP,MAAMC,YAAY,GAAG;AACnBC,EAAAA,MAAM,EAAE,IADW;AAEnBC,EAAAA,QAAQ,EAAE,IAFS;AAGnBC,EAAAA,aAAa,EAAE;AAHI,CAArB;AAMA,OAAO,MAAMC,OAAO,GAAG;AACrBC,EAAAA,KAAK,EAAEC,GAAG,IAAI;AACZ,QAAIC,gBAAJ,EAAsBC,WAAtB;AACAZ,IAAAA,KAAK,CACFa,IADH,CACQ,4BADR,EACsC;AAClCP,MAAAA,QAAQ,EAAEI,GAAG,CAACJ,QADoB;AAElCQ,MAAAA,QAAQ,EAAEJ,GAAG,CAACI;AAFoB,KADtC,EAKGC,IALH,CAKQ,UAASC,GAAT,EAAc;AAClBJ,MAAAA,WAAW,GAAGI,GAAG,CAACC,IAAJ,CAAS,CAAT,EAAY,WAAZ,CAAd;AACAN,MAAAA,gBAAgB,GAAGK,GAAG,CAACC,IAAJ,CAAS,CAAT,EAAY,eAAZ,CAAnB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYP,WAAZ,EAAyBD,gBAAzB;AACA,aAAO;AACLS,QAAAA,IAAI,EAAEnB,KAAK,CAACC,KADP;AAELI,QAAAA,QAAQ,EAAEM,WAFL;AAGLL,QAAAA,aAAa,EAAEI;AAHV,OAAP;AAKD,KAdH,EAeGU,KAfH,CAeS,UAASC,GAAT,EAAc;AACnBJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACD,KAjBH;AAkBD,GArBoB;AAsBrBC,EAAAA,MAAM,EAAE,MAAM;AACZvB,IAAAA,KAAK,CACFwB,GADH,CACO,6BADP,EAEGT,IAFH,CAEQ,UAASU,QAAT,EAAmB;AACvBP,MAAAA,OAAO,CAACC,GAAR,CAAYM,QAAZ;AACD,KAJH,EAKGJ,KALH,CAKS,UAASK,KAAT,EAAgB;AACrBR,MAAAA,OAAO,CAACC,GAAR,CAAYO,KAAZ;AACD,KAPH;AAQA,WAAO;AACLN,MAAAA,IAAI,EAAEnB,KAAK,CAACE;AADP,KAAP;AAGD;AAlCoB,CAAhB;;AAqCP,MAAMwB,OAAO,GAAG,CAACC,KAAK,GAAGxB,YAAT,EAAuByB,MAAvB,KAAkC;AAChD,UAAQA,MAAM,CAACT,IAAf;AACE,SAAKnB,KAAK,CAACC,KAAX;AACE,aAAO,EACL,GAAG0B,KADE;AAELtB,QAAAA,QAAQ,EAAEuB,MAAM,CAACvB,QAFZ;AAGLC,QAAAA,aAAa,EAAEsB,MAAM,CAAC,eAAD;AAHhB,OAAP;;AAKF,SAAK5B,KAAK,CAACE,MAAX;AACE,aAAO,EACL,GAAGyB,KADE;AAELtB,QAAAA,QAAQ,EAAE,IAFL;AAGLD,QAAAA,MAAM,EAAE,IAHH;AAILE,QAAAA,aAAa,EAAE;AAJV,OAAP;;AAMF;AACE,aAAOqB,KAAP;AAfJ;AAiBD,CAlBD;;AAoBA,eAAeD,OAAf;AAEA,OAAO,MAAMG,WAAW,GAAGF,KAAK,IAAI;AAClC,UAAQA,KAAK,CAACtB,QAAd;AACE,SAAK,QAAL;AACE,aAAO,IAAP;;AACF,SAAK,UAAL;AACE,aAAO,IAAP;;AACF;AACE,aAAOsB,KAAK,CAACtB,QAAb;AANJ;AAQD,CATM","sourcesContent":["import axios from 'axios'\r\nexport const types = {\r\n  LOGIN: 'AUTH/LOGIN',\r\n  LOGOUT: 'AUTH/LOGOUT'\r\n}\r\n\r\nconst initialState = {\r\n  userId: null,\r\n  username: null,\r\n  user_function: 9\r\n}\r\n\r\nexport const actions = {\r\n  login: obj => {\r\n    let resuser_function, resusername\r\n    axios\r\n      .post('http://127.0.0.1/api/login', {\r\n        username: obj.username,\r\n        password: obj.password\r\n      })\r\n      .then(function(res) {\r\n        resusername = res.data[0]['user_name']\r\n        resuser_function = res.data[0]['user_function']\r\n        console.log(resusername, resuser_function)\r\n        return {\r\n          type: types.LOGIN,\r\n          username: resusername,\r\n          user_function: resuser_function\r\n        }\r\n      })\r\n      .catch(function(err) {\r\n        console.log(err)\r\n      })\r\n  },\r\n  logout: () => {\r\n    axios\r\n      .get('http://127.0.0.1/api/logout')\r\n      .then(function(response) {\r\n        console.log(response)\r\n      })\r\n      .catch(function(error) {\r\n        console.log(error)\r\n      })\r\n    return {\r\n      type: types.LOGOUT\r\n    }\r\n  }\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case types.LOGIN:\r\n      return {\r\n        ...state,\r\n        username: action.username,\r\n        user_function: action['user_function']\r\n      }\r\n    case types.LOGOUT:\r\n      return {\r\n        ...state,\r\n        username: null,\r\n        userId: null,\r\n        user_function: 9\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default reducer\r\n\r\nexport const getUsername = state => {\r\n  switch (state.username) {\r\n    case 'daidai':\r\n      return '呆呆'\r\n    case 'guaiguai':\r\n      return '乖乖'\r\n    default:\r\n      return state.username\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}